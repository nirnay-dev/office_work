<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Video Player</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            background-color: #f0f0f0; /* Light mode background */
            color: #333; /* Light mode text color */
            transition: background-color 0.3s, color 0.3s;
            position: relative; /* Needed for fixed dark mode toggle */
        }
        /* Dark mode styles */
        body.dark-mode {
            background-color: #222; /* Dark mode background */
            color: #eee; /* Dark mode text color */
        }

        .container {
            background-color: white; /* Light mode container background */
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            width: 100%; /* Make container responsive to screen width */
            /* max-width will be controlled by JavaScript based on slider */
            text-align: center;
            transition: background-color 0.3s, box-shadow 0.3s, max-width 0.3s ease-out; /* Add max-width transition */
        }
        /* Dark mode container */
        body.dark-mode .container {
            background-color: #333;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
        }

        h1 {
            color: #333; /* Light mode heading color */
            margin-bottom: 25px;
        }
        /* Dark mode heading */
        body.dark-mode h1 {
            color: #eee;
        }

        .input-group {
            margin-bottom: 25px;
            display: flex;
            flex-wrap: wrap; /* Allow input and button to wrap on smaller screens */
            justify-content: center;
            gap: 10px;
        }
        input[type="text"] {
            flex-grow: 1;
            padding: 12px;
            border: 1px solid #ddd; /* Light mode input border */
            border-radius: 5px;
            font-size: 16px;
            max-width: 400px; /* Limit input width */
            background-color: white; /* Light mode input background */
            color: #333; /* Light mode input text */
            transition: background-color 0.3s, color 0.3s, border-color 0.3s;
        }
        /* Dark mode input */
        body.dark-mode input[type="text"] {
            background-color: #444;
            color: #eee;
            border-color: #555;
        }

        button {
            padding: 12px 25px;
            background-color: #ff0000;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            display: flex; /* Allow content inside button to be flexed */
            align-items: center; /* Vertically align content */
            justify-content: center; /* Horizontally align content */
        }
        button:hover {
            background-color: #cc0000;
        }

        /* Dark mode toggle button specific styles */
        #darkModeToggle {
            background-color: #666;
            color: white; /* This will be the fill color for the SVG */
            width: 50px; /* Fixed width for a square button */
            height: 50px; /* Fixed height for a square button */
            padding: 0; /* Remove padding to make icon fill the button */
            border-radius: 50%; /* Make it round */
            position: fixed; /* Position relative to the viewport */
            top: 20px; /* 20px from the top */
            right: 20px; /* 20px from the right */
            z-index: 1000; /* Ensure it's above other content */
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2); /* Subtle shadow */
        }

        #darkModeToggle:hover {
            background-color: #555;
        }

        #darkModeToggle svg {
            width: 24px; /* Size of the SVG icon */
            height: 24px;
            fill: currentColor; /* Inherit color from parent (button's color) */
        }

        /*
           *** IMPORTANT FOR RESPONSIVE IFRAME SIZE ***
           This block makes the iframe flexible and maintains its 16:9 aspect ratio.
           The 'padding-bottom: 56.25%;' is 9/16 * 100%.
        */
        .video-container {
            margin-top: 30px;
            position: relative;
            width: 100%; /* Take full width of its parent */
            padding-bottom: 56.25%; /* This creates the 16:9 aspect ratio (height is 56.25% of width) */
            height: 0; /* Ensures the padding-bottom defines the height */
            overflow: hidden;
            background-color: #000;
        }
        .video-container iframe {
            position: absolute; /* Position the iframe to fill the container */
            top: 0;
            left: 0;
            width: 100%; /* Make iframe fill the container's width */
            height: 100%; /* Make iframe fill the container's height */
            border: none;
        }
        #error-message {
            color: red;
            margin-top: 15px;
            display: none;
        }
        /* Optional: Add a subtle loading indicator */
        .video-container.loading::after {
            content: "Loading video...";
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 1.2em;
        }

        /* Slider specific styles */
        .slider-group {
            margin-bottom: 20px;
            text-align: center;
        }

        #iframeSizeSlider {
            width: 80%;
            max-width: 500px;
            margin-top: 10px;
            -webkit-appearance: none; /* Remove default styling */
            appearance: none;
            height: 8px;
            background: #d3d3d3;
            outline: none;
            opacity: 0.7;
            transition: opacity .2s;
            border-radius: 5px;
        }

        #iframeSizeSlider:hover {
            opacity: 1;
        }

        #iframeSizeSlider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #ff0000;
            cursor: pointer;
        }

        #iframeSizeSlider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #ff0000;
            cursor: pointer;
        }
        
        /* Dark mode slider styles */
        body.dark-mode #iframeSizeSlider {
            background: #555;
        }
        body.dark-mode #iframeSizeSlider::-webkit-slider-thumb {
            background: #ff4d4d;
        }
        body.dark-mode #iframeSizeSlider::-moz-range-thumb {
            background: #ff4d4d;
        }

    </style>
</head>
<body>
    <button id="darkModeToggle" onclick="toggleDarkMode()">
        <!-- Eye icon for Light Mode (represents the current state is light mode, so shows "dark mode" eye as option) -->
        <!-- This eye icon is intentionally a simple representation. You can replace its path (d="..." ) with a more detailed "open eye" or "normal eye" SVG. -->
        <svg id="darkModeIcon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zM12 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
        </svg>
        <!-- Eye icon for Dark Mode (represents the current state is dark mode, so shows "light mode" eye as option) -->
        <!-- This eye icon is intentionally a simple representation. You can replace its path (d="..." ) with a more detailed "closed eye" or "crossed out eye" SVG. -->
        <svg id="lightModeIcon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" style="display: none;">
            <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"/>
        </svg>
    </button>

    <div class="slider-group">
        <label for="iframeSizeSlider">Adjust Video Player Size:</label>
        <input type="range" id="iframeSizeSlider" min="300" max="1000" value="700" oninput="updateIframeSize(this.value)">
    </div>

    <div class="container" id="videoPlayerContainer">
        <h1>Simple YouTube Video Player</h1>
        <div class="input-group">
            <input type="text" id="youtubeLink" placeholder="Paste YouTube link here (e.g., https://www.youtube.com/watch?v=dQw4w9WgXcQ)">
            <button onclick="loadVideo()">Play Video</button>
        </div>
        <p id="error-message">Please enter a valid YouTube video URL.</p>
        <div class="video-container">
            <iframe id="videoFrame"
                    src=""
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                    allowfullscreen>
            </iframe>
        </div>
    </div>

    <script>
        /**
         * Extracts the YouTube video ID from a given YouTube URL.
         * Supports various YouTube URL formats.
         * @param {string} url - The YouTube video URL.
         * @returns {string|null} The video ID if found, otherwise null.
         */
        function getYouTubeVideoId(url) {
            const regex = /(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/;
            const match = url.match(regex);
            return (match && match[1]) ? match[1] : null;
        }

        /**
         * Loads a YouTube video into the iframe based on the provided URL.
         */
        function loadVideo() {
            const youtubeLinkInput = document.getElementById('youtubeLink');
            const videoFrame = document.getElementById('videoFrame');
            const errorMessage = document.getElementById('error-message');
            const videoContainer = document.querySelector('.video-container');

            const link = youtubeLinkInput.value.trim();

            errorMessage.style.display = 'none';
            errorMessage.textContent = '';

            if (link === '') {
                errorMessage.textContent = 'Please paste a YouTube link.';
                errorMessage.style.display = 'block';
                videoFrame.src = '';
                videoContainer.classList.remove('loading');
                return;
            }

            const videoId = getYouTubeVideoId(link);

            if (videoId) {
                videoContainer.classList.add('loading');
                // Using www.youtube.com/embed/ for standard embeds.
                // For privacy-enhanced mode, you would use 'https://www.youtube-nocookie.com/embed/'
                videoFrame.src = `https://www.youtube.com/embed/${videoId}?autoplay=1&controls=1&rel=0&modestbranding=1`;

                videoFrame.onload = () => {
                    videoContainer.classList.remove('loading');
                };

            } else {
                errorMessage.textContent = 'Invalid YouTube URL. Please make sure it\'s a direct video link (e.g., from youtube.com or youtu.be).';
                errorMessage.style.display = 'block';
                videoFrame.src = '';
                videoContainer.classList.remove('loading');
            }
        }

        /**
         * Toggles dark mode on and off.
         * Stores the preference in localStorage and switches the displayed icon (flipped logic).
         */
        function toggleDarkMode() {
            const body = document.body;
            const darkModeIcon = document.getElementById('darkModeIcon'); // This icon suggests switching TO dark mode
            const lightModeIcon = document.getElementById('lightModeIcon'); // This icon suggests switching TO light mode

            body.classList.toggle('dark-mode');

            if (body.classList.contains('dark-mode')) {
                localStorage.setItem('darkMode', 'enabled');
                darkModeIcon.style.display = 'none'; // Hide the "switch to dark" icon
                lightModeIcon.style.display = 'inline-block'; // Show the "switch to light" icon
            } else {
                localStorage.setItem('darkMode', 'disabled');
                darkModeIcon.style.display = 'inline-block'; // Show the "switch to dark" icon
                lightModeIcon.style.display = 'none'; // Hide the "switch to light" icon
            }
        }

        /**
         * Updates the max-width of the video player container based on the slider value.
         * @param {string} sliderValue - The current value of the slider.
         */
        function updateIframeSize(sliderValue) {
            const videoPlayerContainer = document.getElementById('videoPlayerContainer');
            videoPlayerContainer.style.maxWidth = `${sliderValue}px`;
        }

        // Apply dark mode based on saved preference and set initial icon (flipped logic) when the page loads
        // Also initialize the iframe size based on the slider's default value.
        document.addEventListener('DOMContentLoaded', () => {
            const body = document.body;
            const darkModeIcon = document.getElementById('darkModeIcon');
            const lightModeIcon = document.getElementById('lightModeIcon');
            const iframeSizeSlider = document.getElementById('iframeSizeSlider');

            // Initialize dark mode
            if (localStorage.getItem('darkMode') === 'enabled') {
                body.classList.add('dark-mode');
                darkModeIcon.style.display = 'none';
                lightModeIcon.style.display = 'inline-block';
            } else {
                darkModeIcon.style.display = 'inline-block';
                lightModeIcon.style.display = 'none';
            }

            // Initialize iframe size based on the slider's default value
            updateIframeSize(iframeSizeSlider.value);
        });
    </script>
</body>
</html>
